<!DOCTYPE HTML>
<html>
	<head>
		<title>Project Nine Audio</title>
		<div data-video="dQw4w9WgXcQ" data-autoplay="0" data-loop="1" id="youtube-audio"></div>
		<script src="player.js"></script>
	</head>
	 <body>
   <div class="wrapper">
    <div id="idk"> 
      Keep this in the background to hear audio
    </div>
    <div id="title-text"> 
      Waiting...
    </div>
    </div>
    <div id="test">
    </div>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Rubik&display=swap');
        #overlay {
            position: fixed;
            display: block;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.65);
            z-index: 2;
            cursor: pointer;
        }

        #overlayText {
            position: absolute;
            top: 50%;
            left: 50%;
            font-size: 40px;
            color: white;
            transform: translate(-50%, -50%);
            -ms-transform: translate(-50%, -50%);
        }

        * {
            font-family: "Rubik", sans-serif;
        }

        .wrapper {
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column-reverse;
            height: 100vh;
        }

        #title-text {
            font-size: 30px;
        }

        #idk {
            font-size: 20px;
        }

        body {
            margin: 0;
            padding: 0;
        }
        
    </style>
    <div id="overlay" onclick="overlayOff()">
      <div id="overlayText"><p><b>Click to allow audio.</b></p></div>
    </div>
	<script>
	function overlayOff() {
 		const element = document.getElementById("overlay").remove();
	}
	</script>
	<script type="text/javascript" src="https://www.youtube.com/iframe_api"></script>
<script>

  var player;
  function onYouTubeIframeAPIReady() {

    var ctrlq = document.getElementById("youtube-audio");
    ctrlq.innerHTML = '<img id="youtube-icon" src=""/><div id="youtube-player"></div>';
    ctrlq.style.cssText = 'width:150px;margin:2em auto;cursor:pointer;cursor:hand;display:none';
    ctrlq.onclick = toggleAudio;

    player = new YT.Player('youtube-player', {
      height: '0',
      width: '0',
      videoId: ctrlq.dataset.video,
      playerVars: {
        autoplay: ctrlq.dataset.autoplay,
        loop: ctrlq.dataset.loop,
      },
      events: {
        'onReady': onPlayerReady,
        'onStateChange': onPlayerStateChange 
      } 
    });
  } 

  function togglePlayButton(play) {    
    document.getElementById("youtube-icon").src = play ? "https://i.imgur.com/IDzX9gL.png" : "https://i.imgur.com/quyUPXN.png";
  }

  function toggleAudio() {
    if ( player.getPlayerState() == 1 || player.getPlayerState() == 3 ) {
      player.pauseVideo(); 
      togglePlayButton(false);
    } else {
      player.playVideo(); 
      togglePlayButton(true);
    } 
  } 

  function onPlayerReady(event) {
    player.setPlaybackQuality("small");
    document.getElementById("youtube-audio").style.display = "block";
    togglePlayButton(player.getPlayerState() !== 5);
  }

  function onPlayerStateChange(event) {
    if (event.data === 0) {
      togglePlayButton(false); 
    }
  }

</script>
	</body>
</html>
